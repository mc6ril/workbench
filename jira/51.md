---
Generated: 2026-01-11 20:22:23
Ticket Number: 46
---

## Title

Implement Supabase repositories for Ticket, Epic, Board and Project

## Type

Feature

## Priority

High

## Story Points

13

## Labels

- infrastructure
- repositories
- supabase
- clean-architecture
- ticket
- epic
- board
- project

## Git Branch

`feat/workbench-51-supabase-repositories`

## Description

Implement all Supabase repository implementations for Ticket, Epic, Board and Project entities. These repositories provide concrete implementations of the repository ports defined in `core/ports/`, handling all CRUD operations and domain-specific queries using the Supabase client. This establishes the data access layer for the entire application.

## User Story

As a developer, I want Supabase repository implementations for tickets, epics, boards and projects so that usecases can persist and retrieve data from the database following Clean Architecture principles.

## Scope

This ticket covers the implementation of all repository implementations mentioned in the planning document section 3.1 for the "Repositories" sub-area:

- Ticket Repository Supabase (CRUD operations)
- Epic Repository Supabase (CRUD and ticket queries)
- Board Repository Supabase (board and column management)
- Project Repository Supabase (project management)

## Acceptance Criteria

1. **Ticket Repository Implementation**
   - [ ] `ticketRepositorySupabase` implements `TicketRepository` port in `infrastructure/supabase/ticketRepositorySupabase.ts`
   - [ ] All CRUD operations implemented (create, read, update, delete)
   - [ ] Filtering methods implemented (by project, status, epic, parent)
   - [ ] Position update methods implemented (move ticket, reorder within column)
   - [ ] Uses domain types (Ticket, CreateTicketInput, UpdateTicketInput)
   - [ ] Maps Supabase data to domain entities using mappers (from separate ticket)

2. **Epic Repository Implementation**
   - [ ] `epicRepositorySupabase` implements `EpicRepository` port in `infrastructure/supabase/epicRepositorySupabase.ts`
   - [ ] All CRUD operations implemented (create, read, update, delete)
   - [ ] Ticket assignment/unassignment methods implemented
   - [ ] Ticket queries implemented (list tickets by epic)
   - [ ] Uses domain types (Epic, CreateEpicInput, UpdateEpicInput)
   - [ ] Maps Supabase data to domain entities using mappers (from separate ticket)

3. **Board Repository Implementation**
   - [ ] `boardRepositorySupabase` implements `BoardRepository` port in `infrastructure/supabase/boardRepositorySupabase.ts`
   - [ ] Board CRUD operations implemented
   - [ ] Column CRUD operations implemented
   - [ ] Column ordering methods implemented
   - [ ] Uses domain types (Board, Column, CreateBoardInput, etc.)
   - [ ] Maps Supabase data to domain entities using mappers (from separate ticket)

4. **Project Repository Implementation**
   - [ ] `projectRepositorySupabase` implements `ProjectRepository` port in `infrastructure/supabase/projectRepositorySupabase.ts`
   - [ ] All CRUD operations implemented (create, read, update, delete)
   - [ ] User membership methods implemented (list projects by user, add user to project, etc.)
   - [ ] Uses domain types (Project, CreateProjectInput, UpdateProjectInput)
   - [ ] Maps Supabase data to domain entities using mappers (from separate ticket)

5. **Error Handling**
   - [ ] Supabase errors mapped to domain errors (from separate error handling ticket)
   - [ ] Consistent error handling across all repositories
   - [ ] Network errors properly handled and propagated

6. **Code Quality**
   - [ ] All repositories follow consistent patterns
   - [ ] No business logic in repositories (pure data access)
   - [ ] TypeScript strict mode compliance
   - [ ] No `any` types used
   - [ ] Proper JSDoc comments

## Technical Considerations

- **Infrastructure Layer**: All implementations in `infrastructure/supabase/`
- **Ports**: Repositories must implement interfaces from `core/ports/`
- **Domain Types**: Use domain types only, no Supabase-specific types exposed
- **Mappers**: Use mapper functions (from separate ticket) to convert Supabase data to domain entities
- **Supabase Client**: Use centralized Supabase client from `infrastructure/supabase/client.ts`
- **Error Handling**: Use error handling utilities (from separate ticket) to map Supabase errors to domain errors
- **RLS Policies**: Repositories rely on RLS policies (from database schema ticket) for access control
- **Dependencies**: Repositories depend on domain types and ports only, no presentation layer imports

## Definition of Done

- [ ] All four repository implementations created in `infrastructure/supabase/`
- [ ] All repositories implement their respective port interfaces
- [ ] All CRUD operations implemented and tested
- [ ] Domain-specific queries implemented (filtering, assignment, etc.)
- [ ] Mappers integrated (from separate ticket)
- [ ] Error handling integrated (from separate ticket)
- [ ] Code passes ESLint and TypeScript checks
- [ ] Imports follow project conventions (absolute `@/` paths)
- [ ] JSDoc comments added for public methods
- [ ] Repositories are ready for usecase integration

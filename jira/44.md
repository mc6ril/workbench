---
Generated: 2026-01-08 10:00:00
Ticket Number: 44
---

## Title

Implement board configuration usecases for columns management

## Type

Feature

## Priority

Medium

## Story Points

5

## Labels

- domain
- usecases
- board
- clean-architecture

## Git Branch

`feat/workbench-44-board-configuration-usecases`

## Description

Implement the board-related usecases required to configure and retrieve the board column configuration, enabling a flexible Kanban-style experience. These usecases will manage column definitions and ordering at the domain level, independent of any UI representation.

## User Story

As a project member, I want to configure the board columns so that the board structure matches my workflow (statuses, order, and visibility).

## Scope

This ticket covers the design and implementation of the board-related usecases mentioned in the planning document section 2.3 for the "Board" sub area:

- Configure Columns Use Case
- Get Board Configuration Use Case

## Acceptance Criteria

1. **Configure Columns Use Case**
   - `configureColumns` accepts a full board configuration input (e.g., list of columns with ids, labels, status mapping, order, and visibility flags) and persists it via the appropriate board/column repository.
   - Invalid configurations (e.g., duplicate column identifiers, missing required statuses, invalid order indices) are rejected with domain validation errors before persistence.
   - The usecase supports idempotent behavior: reapplying the same configuration does not create duplicates or inconsistencies.

2. **Get Board Configuration Use Case**
   - `getBoardConfiguration` returns the current column configuration for a given project or board context, including column order and status mapping.
   - If no configuration exists yet, the usecase returns either a default configuration or a well-defined "no configuration" domain state as decided by domain rules.

3. **Consistency with Tickets**
   - The board configuration is compatible with ticket statuses used in ticket-related usecases.
   - When ticket status values are constrained by column configuration, validation rules are documented and enforced at the usecase level.

## Technical Considerations

- **Domain**
  - Define or refine board/column domain types and Zod schemas to represent:
    - Column identifier and label.
    - Status mapping or semantic meaning of columns.
    - Order/index and visibility flags.
  - Clearly document domain invariants (e.g., at least one active column, unique column ids, optional special columns like "Backlog" or "Done").
- **Usecases**
  - Implement usecases under `core/usecases/board/` (e.g., `configureColumns`, `getBoardConfiguration`).
  - Usecases:
    - Validate input using Zod.
    - Depend only on board-related ports (and possibly project ports) defined in `core/ports/boardRepository.ts` (or related ports).
    - Encapsulate all domain rules for how columns are structured and used.
- **Ports**
  - Ensure `BoardRepository` (or equivalent port) exposes:
    - Methods to store and retrieve board configuration.
  - Extend the port if necessary without leaking infrastructure details.
- **Infrastructure**
  - No changes required here; usecases must be fully testable against mocked repositories.
- **Presentation**
  - No UI integration in this ticket; hooks and components will consume these usecases in later tickets.

## Definition of Done

- Board configuration usecases implemented in `core/usecases/board/` according to the Scope.
- Board/column domain types and schemas:
  - Defined or updated in the domain layer with clear invariants.
  - Used consistently for validation in usecases.
- Tests:
  - Jest tests created or updated under `__tests__/core/usecases/board/` to cover:
    - Valid and invalid configurations (duplicate ids, invalid order, missing statuses).
    - Retrieval of existing configuration and behavior when no configuration is stored.
  - Repositories fully mocked using `__mocks__/core/ports/boardRepository.ts`.
- Quality:
  - No ESLint or TypeScript errors.
  - Imports use absolute `@/` paths and respect ordering rules.
  - Usecases documented with short JSDoc comments explaining responsibilities and main rules.

---
Generated: 2026-01-08 10:00:00
Ticket Number: 45
---

## Title

Implement project retrieval usecase for single-project support

## Type

Feature

## Priority

Medium

## Story Points

3

## Labels

- domain
- usecases
- project
- clean-architecture

## Git Branch

`feat/workbench-45-get-project-usecase`

## Description

Implement a `getProject` usecase that retrieves the current project in a single-project context, providing a clean domain API for the rest of the system. This usecase will centralize project retrieval logic and ensure consistent validation and error handling.

## User Story

As a user of the workspace, I want the application to consistently load the current project so that all board, ticket, and epic features operate on the correct project.

## Scope

This ticket covers the design and implementation of the "Get Project Use Case" mentioned in the planning document section 2.3 for the "Project" sub area:

- Get Project Use Case

## Acceptance Criteria

1. **Get Project Usecase Behavior**
   - `getProject` retrieves the project associated with the current context (e.g., project id) using the appropriate `ProjectRepository` port.
   - If the project exists, the usecase returns a fully populated domain `Project` object.
   - If the project does not exist or the identifier is invalid, the usecase returns a typed domain "not found" or "invalid input" error.

2. **Single-Project Support**
   - The usecase supports both:
     - Explicit project id input.
     - Or a convention for "current project" in a single-project environment (e.g., from configuration or a fixed identifier), as defined by domain rules.
   - The behavior is clearly documented and covered by tests.

3. **Error Handling**
   - Infrastructure-specific errors (e.g., Supabase failures) are not leaked; they are mapped to domain-level errors at the repository level and surfaced consistently by the usecase.

## Technical Considerations

- **Domain**
  - Ensure `Project` domain types and schemas exist and can represent all fields required by the rest of the system (board, tickets, epics).
  - Define input schema for `getProject` (if it requires explicit id or parameters).
- **Usecases**
  - Implement `getProject` under `core/usecases/project/`.
  - Use Zod to:
    - Validate input (if any).
    - Optionally validate the project data returned by the repository before returning it to callers.
  - Depend only on the `ProjectRepository` port from `core/ports/projectRepository.ts` (or equivalent).
- **Ports**
  - Ensure the project repository port exposes at least:
    - `getById(projectId: string): Promise<Project | null>` or an equivalent method compatible with single-project mode.
  - Extend the port if needed without leaking infrastructure details.
- **Infrastructure**
  - No direct infrastructure modifications in this ticket; repository implementations will be adapted in a separate infrastructure-focused task if needed.
- **Presentation**
  - UI integration (e.g., React Query hook `useProject`) is out of scope and will be covered by a separate ticket.

## Definition of Done

- `getProject` usecase implemented in `core/usecases/project/` with:
  - Typed input and output signatures using domain types.
  - Zod validation for inputs (and optionally outputs).
  - Clear error modeling for "not found" and invalid parameters.
- Tests:
  - Jest unit tests created or updated under `__tests__/core/usecases/project/` to cover:
    - Successful retrieval of an existing project.
    - Project not found scenario.
    - Invalid input (if applicable).
  - Repositories mocked using appropriate mocks (e.g., `__mocks__/core/ports/projectRepository.ts` or added as needed).
- Quality:
  - Code passes ESLint and TypeScript checks.
  - Imports follow the project conventions (absolute `@/` paths, correct order).
  - Short JSDoc comment documents the `getProject` usecase responsibility and single-project assumptions.

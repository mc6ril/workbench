---
Generated: 2025-01-27 19:45:00
Ticket Number: 21
---

# Create Global Loader Component

- Type: Feature
- Priority: Medium
- Story Points: 3
- Labels: ui, components, loading-states, accessibility
- Git Branch: `feat/workbench-21-global-loader-component`

## Description

Create a reusable global Loader component to centralize loading state management across the application. Currently, loading states are implemented inline in multiple pages with duplicated code and inconsistent styling. A centralized Loader component will improve maintainability, consistency, and user experience.

## User Story

As a developer, I want a reusable Loader component so that I can consistently display loading states across all pages without duplicating code.

## Acceptance Criteria

- [ ] **Loader Component Creation**
  - [ ] Create `Loader` component in `presentation/components/ui/Loader.tsx`
  - [ ] Support full-page loading state (centered, full viewport)
  - [ ] Support inline loading state (within container)
  - [ ] Use i18n for loading message (from `common.loading`)
  - [ ] Follow component structure: arrow function with export default
  - [ ] Define props with `type` (not `interface`)

- [ ] **Styling & Design**
  - [ ] Create `Loader.module.scss` in `presentation/components/ui/`
  - [ ] Use SCSS variables from `styles/variables/*` for all values
  - [ ] Support full-page variant (centered, full viewport height)
  - [ ] Support inline variant (within container, no full viewport)
  - [ ] Add loading spinner/indicator (CSS-based or SVG)
  - [ ] Ensure responsive design (mobile, tablet, desktop)
  - [ ] Follow BEM naming convention (kebab-case with `__` and `--`)

- [ ] **Accessibility (WCAG 2.1 AA)**
  - [ ] Add `role="status"` for loading indicator
  - [ ] Add `aria-live="polite"` for non-intrusive announcements
  - [ ] Add `aria-label` with descriptive text (e.g., "Loading content")
  - [ ] Ensure keyboard navigation is not blocked during loading
  - [ ] Support screen readers with appropriate ARIA attributes

- [ ] **Component API**
  - [ ] Props: `variant?: "full-page" | "inline"` (default: "full-page")
  - [ ] Props: `message?: string` (optional custom message, defaults to i18n)
  - [ ] Props: `className?: string` (optional custom class for styling)
  - [ ] Memoize component with `React.memo` for performance

- [ ] **Integration & Refactoring**
  - [ ] Replace loading state in `src/app/myworkspace/page.tsx` with `<Loader variant="full-page" />`
  - [ ] Replace loading states in `src/app/auth/verify-email/page.tsx` with `<Loader variant="inline" />`
  - [ ] Replace loading states in `src/app/auth/update-password/page.tsx` with `<Loader variant="inline" />`
  - [ ] Replace inline loading text in `src/app/auth/signin/page.tsx` with `<Loader variant="inline" />`
  - [ ] Remove duplicate loading styles from page-specific SCSS files
  - [ ] Export `Loader` from `presentation/components/ui/index.ts` (if exists)

- [ ] **Testing**
  - [ ] Create unit tests in `__tests__/presentation/components/ui/Loader.test.tsx`
  - [ ] Test full-page variant rendering
  - [ ] Test inline variant rendering
  - [ ] Test i18n message display
  - [ ] Test custom message prop
  - [ ] Test accessibility attributes (role, aria-live, aria-label)
  - [ ] Test component memoization (no unnecessary re-renders)

## Technical Considerations

- **Domain** (`core/domain/`):
  - No domain changes required

- **Ports** (`core/ports/`):
  - No port changes required

- **Usecases** (`core/usecases/`):
  - No usecase changes required

- **Infrastructure** (`infrastructure/`):
  - No infrastructure changes required

- **Presentation** (`presentation/`):
  - Create `presentation/components/ui/Loader.tsx` - Main component
  - Create `presentation/components/ui/Loader.module.scss` - Component styles
  - Update `presentation/components/ui/index.ts` - Export Loader (if exists)
  - Refactor `src/app/myworkspace/page.tsx` - Replace inline loading with `<Loader />`
  - Refactor `src/app/auth/verify-email/page.tsx` - Replace inline loading with `<Loader />`
  - Refactor `src/app/auth/update-password/page.tsx` - Replace inline loading with `<Loader />`
  - Refactor `src/app/auth/signin/page.tsx` - Replace inline loading text with `<Loader />`
  - Remove duplicate loading styles from:
    - `src/app/myworkspace/HomePage.module.scss` (`.home-loading`)
    - `src/app/auth/verify-email/VerifyEmailPage.module.scss` (`.verify-email-loading`)
    - `src/app/auth/update-password/UpdatePasswordPage.module.scss` (`.update-password-loading`)

- **Shared** (`shared/`):
  - Use existing i18n key: `common.loading` from `shared/i18n/messages/fr.json`
  - No new translation keys required

- **Styles** (`styles/`):
  - Use existing SCSS variables from `styles/variables/*`
  - May need to add spinner/indicator styles using CSS animations
  - Ensure all spacing, colors, and sizes use variables

## Component Structure Example

```typescript
type LoaderProps = {
  variant?: "full-page" | "inline";
  message?: string;
  className?: string;
};

const Loader = ({ variant = "full-page", message, className }: LoaderProps) => {
  const t = useTranslation("common");
  const displayMessage = message || t("loading");
  
  // ... component implementation
};

export default React.memo(Loader);
```

## Loading Spinner Options

Consider one of these approaches for the loading indicator:

1. **CSS-based spinner**: Pure CSS animation (no external dependencies)
2. **SVG spinner**: Simple SVG with CSS animation
3. **Text-only**: Just the loading message (simplest, but less visual feedback)

Recommendation: CSS-based spinner for better UX while keeping bundle size small.

## Definition of Done

- [ ] Loader component created in `presentation/components/ui/`
- [ ] Component supports full-page and inline variants
- [ ] Component uses i18n for loading message
- [ ] Component follows accessibility guidelines (WCAG 2.1 AA)
- [ ] SCSS variables used for all styling (no hardcoded values)
- [ ] All existing loading states replaced with `<Loader />` component
- [ ] Duplicate loading styles removed from page-specific SCSS files
- [ ] Unit tests written and passing
- [ ] Component exported from `presentation/components/ui/index.ts` (if exists)
- [ ] No TypeScript errors
- [ ] No ESLint errors
- [ ] Manual testing completed (full-page and inline variants)
- [ ] Accessibility testing completed (screen reader, keyboard navigation)
- [ ] Code review completed

## Related Components

- `src/presentation/components/ui/Button.tsx` - Reference for component structure
- `src/presentation/components/ui/Input.tsx` - Reference for component structure
- `src/app/myworkspace/page.tsx` - Replace loading state (lines 138-145)
- `src/app/auth/verify-email/page.tsx` - Replace loading state (lines 135-143)
- `src/app/auth/update-password/page.tsx` - Replace loading state (lines 237-241)
- `src/app/auth/signin/page.tsx` - Replace inline loading text (line 159)
- `src/shared/i18n/messages/fr.json` - Use `common.loading` key
- `src/styles/variables/` - Use existing SCSS variables

## Dependencies

- None (standalone feature)

## Notes

- The Loader component should be lightweight and performant
- Consider adding a spinner animation for better visual feedback
- The component should work seamlessly with React Query loading states
- Future enhancements could include:
  - Skeleton loaders for specific content types
  - Progress indicators for long-running operations
  - Different spinner styles (dots, bars, circles)


---
Generated: 2026-01-16 15:40:18
Ticket Number: 81
---

## Jira Ticket

**Title:** Implement React Query hooks for Tickets, Epics, Board configuration, and Project

**Type:** Task  
**Priority:** Medium  
**Story Points:** 8  
**Labels:** react-query, hooks, tickets, epics, board, clean-architecture

**Suggested Branch:** `feat/workbench-81-react-query-hooks`

## Summary

Create the missing React Query hooks listed in planning section **5.1 React Query Hooks** to standardize server-state access for tickets, epics, board configuration, and project data.

## Context

We already have some hooks implemented in `src/presentation/hooks/` (e.g., `useProject`, `useProjects`, `useProjectTickets`). This ticket completes the remaining hooks and ensures they all follow the project conventions:

- UI → hooks → usecases → repositories (ports) → Supabase
- Centralized `queryKeys` factory
- Stable query keys (no inline arrays) and correct invalidation

## Scope (only section 5.1)

### Tickets

- Add `useTickets` hook (list tickets with filters and sorting)
- Add `useTicket` hook (single ticket detail)
- Add `useCreateTicket` mutation hook
- Add `useUpdateTicket` mutation hook
- Add `useDeleteTicket` mutation hook
- Add `useMoveTicket` mutation hook (board drag-and-drop)
- Add `useReorderTicket` mutation hook (column reordering)
- Add `useAssignTicketToEpic` mutation hook
- Add `useCreateSubtask` mutation hook

### Epics

- Add `useEpics` hook (list epics)
- Add `useEpic` hook (epic detail)
- Add `useCreateEpic` mutation hook
- Add `useUpdateEpic` mutation hook
- Add `useDeleteEpic` mutation hook

### Board

- Add `useBoardConfiguration` hook (board + columns)
- Add `useConfigureColumns` mutation hook

### Project

- Add `useProject` hook (project detail) — validate existing implementation matches conventions; adjust only if needed

## Acceptance Criteria

- **Hook location & naming**
  - New hooks are created under `src/presentation/hooks/{ticket|epic|project|board}/` (or the existing structure used in the repo).
  - All hooks are exported via the appropriate `index.ts` barrel files.

- **Clean Architecture compliance**
  - Hooks call **usecases** only (no direct calls to repository methods from hooks).
  - Repositories are passed into usecases from hooks (presentation may import infrastructure implementations).

- **React Query correctness**
  - All query keys are built using `src/presentation/hooks/queryKeys.ts` (no inline array keys).
  - Keys are **stable** and include all filter fields used by queries.
  - Mutations invalidate the minimal correct set of queries (tickets list/detail, epics list/detail, board configuration, projects list/detail).
  - Queries use `enabled` for required parameters (e.g., `projectId`, `ticketId`, `epicId`) to avoid accidental fetches.

- **Typing & validation**
  - Mutation inputs use the domain input types (e.g., `CreateTicketInput`, `UpdateTicketInput`, `CreateSubtaskInput`, `ReorderTicketInput`) with explicit types (no `any`).
  - Usecases validate user inputs using Zod schemas where applicable (create/update operations).

## Technical Notes / Implementation Considerations

- **Query keys**
  - Extend `queryKeys` to include missing namespaces (epics, board configuration, ticket detail, etc.).
  - Ensure the tickets list key includes all `TicketFilters` fields (currently `parentId` is not represented in the key, which can cause cache collisions).

- **Sorting**
  - If “sorting” is required for tickets list, define a typed sorting input (domain) and include it in both the usecase signature and `queryKeys` for the list query.

## Definition of Done

- All hooks in this ticket exist, compile, and are exported.
- No architecture violations (no Supabase in core, no repo calls from UI/components).
- No hardcoded user-facing strings introduced (i18n rules remain respected).
- Any necessary query key additions are centralized in `queryKeys.ts`.
- DRY

## Note from developper

- Try to keep hooks as pure as possible. Errors / translations should not be done here (I guess)
- Avoid any technical dept
- DRY

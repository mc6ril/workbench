---
Generated: 2026-01-16 16:21:37
Ticket Number: 83
---

## Jira Ticket

**Title:** Add AppProvider to centralize global providers and standardize React Query defaults

**Type:** Task  
**Priority:** Medium  
**Story Points:** 3  
**Labels:** `providers`, `react-query`, `presentation`, `clean-architecture`

**Git Branch:** `feat/workbench-83-app-provider`

### Description

Create a single `AppProvider` wrapper in the presentation layer to centralize global providers (starting with React Query), reduce provider nesting in `src/app/layout.tsx`, and make default provider configuration consistent and easy to evolve (theme/i18n additions later).

### User Story

As a developer, I want global providers standardized in one place so that adding or changing providers is safe, consistent, and does not require touching multiple entry points.

### Acceptance Criteria

- **AppProvider created**: `src/presentation/providers/AppProvider.tsx` exists and wraps `children` with all required global providers.
- **Layout uses AppProvider**: `src/app/layout.tsx` uses `AppProvider` instead of directly rendering nested providers.
- **React Query defaults centralized**:
  - Confirm `src/presentation/providers/ReactQueryProvider.tsx` configures stable default options (stale time / GC time / retry / refetch behavior).
  - Any needed adjustments are made in `ReactQueryProvider` (not scattered across hooks/pages).
- **No business logic**: Providers do not include business rules or infrastructure calls.
- **Type safety**: Explicit typing, no `any`.

### Technical Considerations (Clean Architecture)

- **Presentation**:
  - `AppProvider` must live in `src/presentation/providers/`.
  - `ReactQueryProvider` remains the single source of truth for React Query client configuration.
- **Out of scope**:
  - Do not move business orchestration into providers.
  - Do not add side-effects (e.g., auth refresh loops) inside providers without a dedicated ticket/spec.

### Definition of Done

- `AppProvider` implemented and wired in `src/app/layout.tsx`.
- Provider tree remains minimal and readable.
- TypeScript passes (strict).
- No forbidden imports (Supabase/usecases) in providers.

### Related Components

- `src/app/layout.tsx`
- `src/presentation/providers/ReactQueryProvider.tsx`

### Related Docs

- `docs/report/planning/plan.md` â€” section **5.3 Providers**

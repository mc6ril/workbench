---
Generated: 2026-01-11 20:22:23
Ticket Number: 50
---

## Title

Create mapper functions for Ticket, Epic and Board entities

## Type

Task

## Priority

High

## Story Points

5

## Labels

- infrastructure
- mappers
- domain
- clean-architecture
- ticket
- epic
- board

## Git Branch

`feat/workbench-50-domain-mappers`

## Description

Create mapper functions to convert Supabase data to domain entities for Ticket, Epic and Board. These mappers handle data transformation, field mapping, type coercion, and validation to ensure Supabase data structures are correctly converted to domain types. Mappers are pure functions with no side effects.

## User Story

As a developer, I want mapper functions to convert Supabase data to domain entities so that repositories can cleanly transform database records into domain objects without leaking infrastructure concerns.

## Scope

This ticket covers the implementation of all mapper functions mentioned in the planning document section 3.1 for the "Mappers" sub-area:

- Ticket Mapper (Supabase → Ticket domain entity)
- Epic Mapper (Supabase → Epic domain entity)
- Board Mapper (Supabase → Board and Column domain entities)

## Acceptance Criteria

1. **Ticket Mapper Implementation**
   - [ ] `mapTicketFromSupabase` function in `infrastructure/supabase/mappers/ticketMapper.ts`
   - [ ] Converts Supabase ticket record to `Ticket` domain type
   - [ ] Handles field name mapping (snake_case → camelCase)
   - [ ] Handles date coercion (string → Date objects)
   - [ ] Handles nullable fields (epicId, parentId)
   - [ ] Validates data using Ticket schema (optional but recommended)
   - [ ] Returns properly typed `Ticket` object

2. **Epic Mapper Implementation**
   - [ ] `mapEpicFromSupabase` function in `infrastructure/supabase/mappers/epicMapper.ts`
   - [ ] Converts Supabase epic record to `Epic` domain type
   - [ ] Handles field name mapping (snake_case → camelCase)
   - [ ] Handles date coercion (string → Date objects)
   - [ ] Handles nullable fields (description)
   - [ ] Validates data using Epic schema (optional but recommended)
   - [ ] Returns properly typed `Epic` object

3. **Board Mapper Implementation**
   - [ ] `mapBoardFromSupabase` function in `infrastructure/supabase/mappers/boardMapper.ts`
   - [ ] Converts Supabase board record to `Board` domain type
   - [ ] `mapColumnFromSupabase` function for Column entities
   - [ ] Handles field name mapping (snake_case → camelCase)
   - [ ] Handles date coercion (string → Date objects)
   - [ ] Handles board-column relationships
   - [ ] Validates data using Board and Column schemas (optional but recommended)
   - [ ] Returns properly typed `Board` and `Column` objects

4. **Mapper Utilities (Optional)**
   - [ ] Helper functions for common transformations (date parsing, null handling)
   - [ ] Type-safe mapper function signatures
   - [ ] Error handling for invalid data

5. **Code Quality**
   - [ ] All mappers are pure functions (no side effects)
   - [ ] TypeScript strict mode compliance
   - [ ] No `any` types used
   - [ ] Proper error handling for invalid data
   - [ ] JSDoc comments explaining transformations

## Technical Considerations

- **Infrastructure Layer**: All mappers in `infrastructure/supabase/mappers/`
- **Pure Functions**: Mappers are pure functions with no side effects or external dependencies
- **Domain Types**: Mappers return domain types from `core/domain/`
- **Type Safety**: Use TypeScript types for Supabase records (generated types or manual types)
- **Validation**: Optionally use Zod schemas to validate transformed data
- **Error Handling**: Handle invalid data gracefully (throw domain errors or return null)
- **Field Mapping**: Map Supabase snake_case fields to domain camelCase fields
- **Date Handling**: Convert ISO date strings to Date objects
- **Nullable Fields**: Handle nullable/optional fields correctly
- **Dependencies**: Mappers depend on domain types only, no Supabase client or other infrastructure

## Definition of Done

- [ ] Ticket mapper implemented and tested
- [ ] Epic mapper implemented and tested
- [ ] Board and Column mappers implemented and tested
- [ ] All mappers handle field mapping correctly
- [ ] All mappers handle date coercion correctly
- [ ] All mappers handle nullable fields correctly
- [ ] TypeScript strict mode compliance
- [ ] No `any` types used
- [ ] JSDoc comments added
- [ ] Mappers integrated with repositories (from separate ticket)
- [ ] Code passes ESLint and TypeScript checks

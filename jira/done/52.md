---
Generated: 2026-01-11 20:22:23
Ticket Number: 52
---

## Title

Create initial database migration and seed data

## Type

Task

## Priority

Medium

## Story Points

5

## Labels

- infrastructure
- database
- migrations
- seed
- supabase
- postgres

## Git Branch

`feat/workbench-52-initial-migration-seed`

## Description

Create the initial database migration script that combines all table creation, constraints and indexes, and a separate seed migration for default data (default project, initial board columns). These migrations establish the complete database schema and provide initial data for development and testing.

## User Story

As a developer, I want initial database migrations and seed data so that I can set up a fresh database with the complete schema and default data for development and testing.

## Scope

This ticket covers the implementation of migrations mentioned in the planning document section 3.2 for the "Migrations" sub-area:

- Initial Migration (combines tables, constraints, indexes)
- Seed Migration (default project, initial columns)

## Acceptance Criteria

1. **Initial Migration Script**
   - [ ] Migration file created in `supabase/migrations/` with descriptive name (e.g., `YYYYMMDDHHMMSS_initial_schema.sql`)
   - [ ] Combines all table creation (from separate ticket)
   - [ ] Combines all constraints (from separate ticket)
   - [ ] Combines all indexes (from separate ticket)
   - [ ] Migration is idempotent (uses `IF NOT EXISTS` where appropriate)
   - [ ] Migration is well-organized and commented
   - [ ] Migration can be applied to fresh database

2. **Migration Organization (Optional)**
   - [ ] Separate migration files for tables, constraints, indexes (if preferred)
   - [ ] Or single migration file with sections (tables, constraints, indexes)
   - [ ] Migration order documented (dependencies respected)

3. **Seed Migration Script**
   - [ ] Seed migration file created in `supabase/migrations/` with descriptive name (e.g., `YYYYMMDDHHMMSS_seed_initial_data.sql`)
   - [ ] Creates default project (or documents manual creation)
   - [ ] Creates initial board columns (e.g., "To Do", "In Progress", "Done")
   - [ ] Seed data is idempotent (uses `INSERT ... ON CONFLICT DO NOTHING` or similar)
   - [ ] Seed data is optional (can be skipped in production)
   - [ ] Seed data is documented

4. **Migration Testing**
   - [ ] Initial migration can be applied to fresh Supabase database
   - [ ] Seed migration can be applied after initial migration
   - [ ] Migrations can be rolled back (if needed, document rollback process)
   - [ ] Migrations are tested in development environment

5. **Documentation**
   - [ ] Migration files include comments explaining schema structure
   - [ ] Seed data documented (what data is created, why)
   - [ ] Migration application process documented
   - [ ] Migration rollback process documented (if applicable)

6. **Database Setup**
   - [ ] Complete schema created after applying initial migration
   - [ ] Seed data created after applying seed migration
   - [ ] Database is ready for application use
   - [ ] Database structure matches domain entity structure

## Technical Considerations

- **Migration Files**: Use Supabase migration system in `supabase/migrations/`
- **Migration Naming**: Use timestamp prefix (YYYYMMDDHHMMSS) for ordering
- **Idempotency**: Use `IF NOT EXISTS`, `ON CONFLICT DO NOTHING`, etc. for idempotent migrations
- **Migration Order**: Migrations are applied in filename order (timestamp ensures correct order)
- **Seed Data**: Use `INSERT ... ON CONFLICT DO NOTHING` or check existence before inserting
- **UUID Generation**: Use `gen_random_uuid()` for seed data UUIDs
- **Initial Columns**: Create default board columns (status values like "todo", "in_progress", "done")
- **Default Project**: Create default project for development/testing (or document manual creation)
- **Production**: Seed migrations may be skipped in production (documented)
- **Dependencies**: Initial migration depends on all table/constraint/index tickets
- **Clean Architecture**: Migrations are infrastructure concern, no domain logic

## Definition of Done

- [ ] Initial migration file created (combines tables, constraints, indexes)
- [ ] Seed migration file created (default project, initial columns)
- [ ] Migrations are idempotent
- [ ] Migrations can be applied successfully
- [ ] Migrations are well-documented
- [ ] Database schema matches domain structure
- [ ] Seed data is created successfully
- [ ] Migration process is documented
- [ ] Code review completed
- [ ] Database is ready for application integration

---
Generated: 2026-01-08 10:15:00
Ticket Number: 41
---

## Title

Define repository ports for Ticket, Epic, Board and Project

## Type

Story

## Priority

High

## Story Points

3

## Labels

- architecture
- clean-architecture
- core
- repositories

## Git Branch

feat/workbench-1-repository-ports

## Description

Define repository interfaces (ports) for Ticket, Epic, Board and Project to centralize data access contracts in the core layer and enable clean separation between domain/usecases and Supabase implementations.  
These ports will support basic CRUD operations plus domain‑specific operations like filtering, ticket assignment and position updates.

## User Story

As a developer, I want clear repository ports for tickets, epics, boards and projects so that I can implement Supabase repositories and usecases without leaking infrastructure concerns into the domain layer.

## Acceptance Criteria

- TicketRepository interface exists in `core/ports` with:
  - CRUD operations for tickets
  - Filtering methods (by project, board, status, assignee, etc.) aligned with existing domain rules
  - Methods to update ticket positions within a board/column
- EpicRepository interface exists in `core/ports` with:
  - CRUD operations for epics
  - Methods to assign and unassign tickets to/from epics
- BoardRepository interface exists in `core/ports` with:
  - CRUD operations for boards and columns
  - Methods to manage board columns ordering and ticket placement at column level
- ProjectRepository interface exists in `core/ports` with:
  - CRUD operations for projects
  - Methods required by existing usecases (e.g. listing projects by user, adding/removing users)
- All repository ports:
  - Use existing domain types (Ticket, Epic, Board, Project, etc.) and do not depend on Supabase types
  - Are fully typed with explicit return types and no `any`
  - Have small, cohesive interfaces without mixing unrelated responsibilities

## Technical Considerations

- Place all new interfaces under `src/core/ports/` and name them `TicketRepository`, `EpicRepository`, `BoardRepository`, `ProjectRepository`.
- Keep ports free of any infrastructure details (no Supabase imports, no DTOs; only domain types).
- Make sure method signatures support the behaviors described in:
  - `board.rules.ts` (board and column management, ticket positions)
  - `ticket.rules.ts` (ticket lifecycle and filtering rules)
  - `epic.rules.ts` (epic/ticket relationships)
- Design methods so they can be easily used by future usecases and React Query hooks (e.g. stable filter parameters, pagination support where relevant).

## Definition of Done

- Repository port interfaces for Ticket, Epic, Board and Project are created in `core/ports` and compiled without TypeScript errors.
- Interfaces are documented with short comments explaining responsibilities and key invariants where non‑obvious.
- Existing and planned usecases for tickets, epics, boards and projects can depend on these ports without needing changes in infrastructure.
- No Supabase or presentation imports exist in the new port files.
- Tests for usecases touching these repositories can define typed mocks based on the new interfaces.
- Code reviewed and aligned with existing Clean Architecture and code‑convention rules.

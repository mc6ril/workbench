---
Generated: 2026-01-15 18:13:08
Ticket Number: 77
---

## Title

Implement main layout structure (Root + Project/Dashboard shell)

## Type

Feature

## Priority

Medium

## Story Points

5

## Labels

- presentation
- layout
- app-shell

## Git Branch

`feat/workbench-77-layout-main`

## Description

Implement the main layout structure described in section 4.3 (Layout/Main) by ensuring the root layout provides the global HTML/providers setup and the project routes render within a dashboard-style shell that can host navigation, header, breadcrumbs, and main content.

## User Story

As a user, I want a consistent application shell so that navigation and page content are structured predictably across the app.

## Acceptance Criteria

1. **Root Layout**
   - [ ] `src/app/layout.tsx` provides a stable global structure and providers (e.g., React Query provider) without leaking page-specific logic
   - [ ] Root layout uses semantic structure to support an app shell (e.g., a main container and predictable landmarks)
   - [ ] Global wrapper (`.app-root`) remains the single top-level app container for consistent styling

2. **Project/Dashboard Shell Layout**
   - [ ] `src/app/(auth)/[projectId]/layout.tsx` keeps the existing server-side access check (fail-closed redirect) and wraps `children` in a dashboard shell
   - [ ] The dashboard shell exposes clear regions for future integration of:
     - [ ] sidebar navigation
     - [ ] app header
     - [ ] breadcrumbs
     - [ ] main content
   - [ ] No business logic is introduced in presentation components (only layout composition)

3. **Styling & UX**
   - [ ] Layout styling uses SCSS (modules or global styles) and variables from `src/styles/variables/*` (no hardcoded values)
   - [ ] Layout structure supports responsive behavior (sidebar + content) without inline styles

4. **Accessibility & i18n**
   - [ ] Layout landmarks are semantic (`<header>`, `<nav>`, `<main>`, `<footer>`) with appropriate roles/ARIA when needed
   - [ ] Any user-facing text introduced in layout components uses i18n keys (no hardcoded strings)

5. **Clean Architecture**
   - [ ] Presentation layer remains free of usecase/repository imports (except existing server layout access check which must remain in the Next.js layout file)
   - [ ] No Supabase calls are introduced outside infrastructure

## Technical Considerations

- **Existing files**:
  - `src/app/layout.tsx` already exists and should be updated/refined rather than recreated.
  - `src/app/(auth)/[projectId]/layout.tsx` already performs access checks; keep this behavior and add only UI composition around `children`.
- **Suggested UI structure**:
  - Consider a dedicated dashboard shell component under `src/presentation/layouts/` (pure UI) and use it from the project layout.

## Definition of Done

- [ ] Root layout and project layout provide a stable, semantic app shell structure
- [ ] No hardcoded user-facing strings were added (i18n keys created if needed)
- [ ] Styling uses SCSS + shared variables only
- [ ] Accessibility landmarks validated (keyboard navigation and screen reader landmarks)
- [ ] Code passes linting and type-checking
